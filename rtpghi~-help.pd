#N canvas 257 38 925 857 12;
#N canvas 625 68 760 628 fft-irfft 0;
#X obj 37 232 rfft~;
#X obj 62 139 tabreceive~ \$0.hann;
#X obj 33 140 *~;
#X obj 130 567 tabreceive~ \$0.hann;
#X obj 101 566 *~;
#X obj 105 602 outlet~;
#X obj 317 170 t a a;
#X obj 69 341 /~;
#X obj 37 343 /~;
#X obj 84 405 rifft~;
#N canvas 698 126 564 537 normalize 0;
#X obj 119 39 inlet;
#X obj 154 356 outlet;
#X obj 209 38 unpack s f f f;
#X obj 244 173 * 6;
#X obj 251 224 /;
#X obj 274 173 t b f;
#X obj 265 72 sel 32 16 8 4 2;
#X obj 301 101 1;
#X obj 328 100 2;
#X obj 357 100 4;
#X obj 388 100 8;
#X obj 254 103 0.816;
#X connect 0 0 2 0;
#X connect 2 1 3 0;
#X connect 2 2 6 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 5 1 4 1;
#X connect 6 0 11 0;
#X connect 6 1 7 0;
#X connect 6 2 8 0;
#X connect 6 3 9 0;
#X connect 6 4 10 0;
#X connect 7 0 5 0;
#X connect 8 0 5 0;
#X connect 9 0 5 0;
#X connect 10 0 5 0;
#X connect 11 0 5 0;
#X restore 340 246 pd normalize;
#X obj 338 276 t f f;
#X obj 264 7 r algorithm;
#X obj 377 129 f 1;
#X obj 432 135 f 0;
#X obj 432 112 t b;
#X obj 231 250 switch~ 1024 4;
#X obj 382 107 sel 2;
#X obj 40 83 inlet~;
#X obj 143 23 r block;
#X obj 172 92 spigot;
#X obj 303 35 t b f;
#X obj 282 81 s set;
#X connect 0 0 8 0;
#X connect 0 1 7 0;
#X connect 1 0 2 1;
#X connect 2 0 0 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 6 0 16 0;
#X connect 6 1 10 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 9 0 4 0;
#X connect 10 0 11 0;
#X connect 11 0 8 1;
#X connect 11 1 7 1;
#X connect 12 0 21 0;
#X connect 13 0 16 0;
#X connect 13 0 20 1;
#X connect 14 0 16 0;
#X connect 14 0 20 1;
#X connect 15 0 14 0;
#X connect 17 0 13 0;
#X connect 17 1 15 0;
#X connect 18 0 2 0;
#X connect 19 0 20 0;
#X connect 20 0 6 0;
#X connect 21 0 22 0;
#X connect 21 1 17 0;
#X restore 334 250 pd fft-irfft;
#N canvas 752 162 760 628 fft-rtpghi 1;
#X obj 44 352 rfft~;
#X obj 43 375 *~;
#X obj 77 374 *~;
#X obj 42 426 sqrt~;
#X obj 94 531 rifft~;
#X obj 395 296 table \$0.hann;
#X obj 577 472 s \$0.hann;
#X msg 576 447 cosinesum \$1 0.5 -0.5;
#X obj 72 305 tabreceive~ \$0.hann;
#X obj 43 306 *~;
#X obj 464 221 t a a;
#X obj 501 274 unpack s f f f;
#X obj 130 567 tabreceive~ \$0.hann;
#X obj 101 566 *~;
#X obj 105 602 outlet~;
#X obj 43 329 *~ 1;
#X obj 42 401 +~;
#X obj 499 302 t f f;
#N canvas 915 136 564 537 normalize 0;
#X obj 119 39 inlet;
#X obj 118 442 outlet;
#X obj 300 44 inlet;
#X obj 193 282 /;
#X obj 216 231 t b f;
#X obj 207 130 sel 32 16 8 4 2;
#X obj 243 159 1;
#X obj 270 158 2;
#X obj 299 158 4;
#X obj 330 158 8;
#X obj 196 161 0.816;
#X floatatom 174 194 5 0 0 0 - - - 0;
#X obj 139 234 * 1.55;
#X connect 0 0 12 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 10 0;
#X connect 5 1 6 0;
#X connect 5 2 7 0;
#X connect 5 3 8 0;
#X connect 5 4 9 0;
#X connect 6 0 4 0;
#X connect 7 0 4 0;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 12 1;
#X connect 12 0 3 0;
#X restore 380 429 pd normalize;
#X obj 380 452 t f f;
#X obj 84 502 /~;
#X obj 124 505 /~;
#X obj 566 299 t f f;
#X msg 120 393 overlap \$1;
#X obj 395 274 switch~ 1024 4;
#X obj 417 1 r algorithm;
#X obj 453 83 f 1;
#X obj 500 83 f 0;
#X obj 500 60 t b;
#X obj 454 60 sel 1;
#X obj 58 267 inlet~;
#X obj 328 42 r block;
#X obj 331 108 spigot;
#X obj 417 26 t b f;
#X obj 410 60 s set;
#X obj 42 455 rtpghi~ 16 1e-06 0 hann;
#X obj 65 223 print;
#X obj 97 77 inlet;
#X connect 0 0 1 0;
#X connect 0 0 1 1;
#X connect 0 1 2 0;
#X connect 0 1 2 1;
#X connect 1 0 16 0;
#X connect 2 0 16 1;
#X connect 3 0 35 0;
#X connect 4 0 13 0;
#X connect 7 0 6 0;
#X connect 8 0 9 1;
#X connect 9 0 15 0;
#X connect 10 0 24 0;
#X connect 10 1 11 0;
#X connect 11 1 17 0;
#X connect 11 2 22 0;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 15 0 0 0;
#X connect 16 0 3 0;
#X connect 17 0 18 0;
#X connect 17 1 7 0;
#X connect 18 0 19 0;
#X connect 19 0 20 1;
#X connect 19 1 21 1;
#X connect 20 0 4 0;
#X connect 21 0 4 1;
#X connect 22 0 23 0;
#X connect 22 1 18 1;
#X connect 23 0 35 0;
#X connect 25 0 33 0;
#X connect 26 0 24 0;
#X connect 26 0 32 1;
#X connect 27 0 24 0;
#X connect 27 0 32 1;
#X connect 28 0 27 0;
#X connect 29 0 26 0;
#X connect 29 1 28 0;
#X connect 30 0 9 0;
#X connect 31 0 32 0;
#X connect 32 0 10 0;
#X connect 33 0 34 0;
#X connect 33 1 29 0;
#X connect 35 0 20 0;
#X connect 35 1 21 0;
#X connect 37 0 35 0;
#X restore 39 246 pd fft-rtpghi;
#X text 28 367 Real-Time Spectrogamm Inversion using the Algorithm
of Real Time Phase Gradient Heap Integration \, introduced by Zdeněk
Průša and Peter L. Søndergaard in Brno in 2016 https://www.dafx.de/paper-archive/2016/dafxpapers/03-DAFx-16_paper_02-PN.pdf
, f 114;
#X text 36 293 signal from magnitude using rtpghi~;
#X text 532 300 original signal;
#X text 28 411 The rtpghi~ PD-Object makes use of their backend c-libraries
libltfat and libphaseret to recreate the phase of a signal with only
the stft-magnitude available \, shortly speaking "phase retrieval".
, f 114;
#X text 110 531 2 - Relative TOLERANCE of coefficients (defaults to
1e-06);
#X text 109 552 3 - CAUSAL Using zero delay (1) or one frame delay
(0 \, default) version of the algorithm, f 103;
#X msg 27 531 tolerance;
#X msg 26 555 causal;
#X msg 27 498 overlap;
#X text 109 490 1 - OVERLAP of subsequent windows (has to match with
the overlap in the subpatch used) \, therefore have a look at "block~"
and "switch" (defaults to 4), f 103;
#X obj 726 617 vu 15 120 rms empty -1 -8 0 10 #404040 #000000 1 0;
#X obj 39 270 throw~ sum;
#X obj 333 276 throw~ sum;
#X obj 538 278 throw~ sum;
#X obj 777 658 vsl 15 80 0 1 0 0 fader empty Master\\\ Output\\\ Volume
0 -9 0 10 #ffffff #000000 #000000 0 1;
#N canvas 527 565 450 300 master 0;
#X obj 79 60 catch~ sum;
#X obj 92 185 env~;
#X obj 100 136 *~;
#X obj 154 187 dac~;
#X obj 46 187 - 100;
#X obj 232 46 r fader;
#X obj 74 232 s rms;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 2 0 3 0;
#X connect 2 0 3 1;
#X connect 4 0 6 0;
#X connect 5 0 2 1;
#X restore 782 613 pd master;
#X obj 295 40 hradio 15 1 0 4 algorithm empty Algorithm\\\ Selector
0 -8 0 10 #fcfcfc #000000 #000000 0;
#N canvas 555 221 450 300 clean 0;
#X obj 121 193 outlet~;
#X obj 129 138 *~;
#X obj 228 32 r algorithm;
#X obj 199 111 f 1;
#X obj 239 138 f 0;
#X obj 240 113 t b;
#X obj 232 80 sel 3;
#X obj 124 52 inlet~;
#X connect 1 0 0 0;
#X connect 2 0 6 0;
#X connect 3 0 1 1;
#X connect 4 0 1 1;
#X connect 5 0 4 0;
#X connect 6 0 3 0;
#X connect 6 1 5 0;
#X connect 7 0 1 0;
#X restore 538 250 pd clean;
#X text 293 56 0 none 1 rtpghi~ 2 fft 3 clean;
#X obj 13 46 sel 0;
#X obj 60 45 t b;
#X obj 99 81 f 1;
#X msg 12 97 \; pd dsp \$1;
#X obj 13 21 r algorithm;
#X text 331 299 signal from fft-ifft;
#X msg 27 581 window;
#N canvas 740 399 622 453 signal 0;
#X obj 48 284 noise~;
#X obj 117 281 osc~ 440;
#N canvas 109 106 277 420 audioplayback 0;
#X obj 89 229 readsf~;
#X obj 91 277 *~ 0;
#X obj 93 152 openpanel;
#X msg 93 197 open \$1 \, 1;
#X obj 156 229 t b;
#X obj 93 175 symbol;
#X obj 94 126 inlet;
#X obj 141 125 inlet;
#X obj 90 308 outlet~;
#X connect 0 0 1 0;
#X connect 0 1 4 0;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 1 1;
#X restore 284 280 pd audioplayback;
#X obj 288 24 inlet open_file;
#X obj 49 344 *~;
#X obj 114 341 *~;
#X obj 185 342 *~;
#X obj 32 99 f 1;
#X obj 27 67 sel 0;
#X obj 62 99 t b;
#X obj 63 122 0;
#X obj 94 99 f 1;
#X obj 124 99 t b;
#X obj 125 122 0;
#X obj 23 29 t f f f f;
#X obj 153 98 f 1;
#X obj 183 98 t b;
#X obj 184 121 0;
#X obj 212 97 f 1;
#X obj 242 97 t b;
#X obj 243 120 0;
#X obj 89 67 sel 1;
#X obj 148 66 sel 2;
#X obj 207 65 sel 3;
#X obj 24 6 r signal_;
#X obj 86 419 outlet~;
#X obj 189 280 phasor~ 440;
#X obj 139 6 loadbang;
#X obj 142 28 0;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 2 0 25 0;
#X connect 3 0 2 0;
#X connect 4 0 25 0;
#X connect 5 0 25 0;
#X connect 6 0 25 0;
#X connect 7 0 4 1;
#X connect 8 0 7 0;
#X connect 8 1 9 0;
#X connect 9 0 10 0;
#X connect 10 0 4 1;
#X connect 11 0 5 1;
#X connect 12 0 13 0;
#X connect 13 0 5 1;
#X connect 14 0 8 0;
#X connect 14 1 21 0;
#X connect 14 2 22 0;
#X connect 14 3 23 0;
#X connect 15 0 6 1;
#X connect 16 0 17 0;
#X connect 17 0 6 1;
#X connect 18 0 2 1;
#X connect 19 0 20 0;
#X connect 20 0 2 1;
#X connect 21 0 11 0;
#X connect 21 1 12 0;
#X connect 22 0 15 0;
#X connect 22 1 16 0;
#X connect 23 0 18 0;
#X connect 23 1 19 0;
#X connect 24 0 14 0;
#X connect 26 0 6 0;
#X connect 27 0 28 0;
#X connect 28 0 8 0;
#X restore 357 154 pd signal;
#X obj 532 40 hradio 15 1 0 4 signal_ empty Signal\\\ Selector 0 -8
0 10 #fcfcfc #000000 #000000 0;
#X obj 357 134 bng 15 250 50 0 empty empty Load\\\ .wav-File 17 7 0
10 #fcfcfc #000000 #000000;
#X text 531 59 0 noise~ 1 sine~ 2 phasor~ 3 .wav file;
#X obj 11 71 0;
#X obj 111 20 loadbang;
#X obj 147 80 s block;
#X obj 175 19 r set;
#X text 55 747 A higher overlap makes the signal reconstruction way
better \, recommended 8 or 16;
#X text 109 573 4 - WINDOW type for the algorithm \, recommended blackman
(default hanning), f 103;
#X msg 147 54 set 1024 16 1;
#X msg 143 158 window hanning;
#X text 109 619 Implemented windows: "hann"="hanning"="nutall10" \,
"sqrthann"="cosine"="sine" \, "hamming" \, "nutall01" \, square"="rect"
\, "tria"="triangular"="bartlett" \, "sqrttria" \, "blackman" \, "blackman2"
\, "nutall"="nuttall12 \, "ogg"="itersine" \, "nuttall20" \, "nuttall11"
\, "nuttall02" \, "nutall30" \, "nuttall21" \, "nuttall03" \, truncgauss01"
;
#X connect 0 0 14 0;
#X connect 1 0 13 0;
#X connect 19 0 15 0;
#X connect 21 0 32 0;
#X connect 21 1 22 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 25 0 21 0;
#X connect 28 0 0 0;
#X connect 28 0 1 0;
#X connect 28 0 19 0;
#X connect 30 0 28 0;
#X connect 32 0 24 0;
#X connect 33 0 38 0;
#X connect 35 0 38 0;
#X connect 38 0 34 0;
#X connect 39 0 1 1;
